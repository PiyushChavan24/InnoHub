{"ast":null,"code":"/** @format */\n\n// /** @format */\n\n// // import React, {useEffect, useState} from 'react';\n// // import { useNavigate } from 'react-router-dom';\n\n// // function ProjectCard({p, onDownload, onCheck}){\n// //   return (\n// //     <div className=\"border p-4 rounded bg-white\">\n// //       <h3 className=\"font-semibold\">{p.title}</h3>\n// //       <p className=\"text-sm\">{p.description}</p>\n// //       <div className=\"text-xs text-gray-500\">By: {p.uploadedBy}</div>\n// //       <div className=\"mt-2 space-x-2\">\n// //         <button onClick={()=> onDownload(p._id)} className=\"px-2 py-1 border rounded\">Download</button>\n// //         <button onClick={()=> onCheck(p._id)} className=\"px-2 py-1 border rounded\">Check Plagiarism</button>\n// //       </div>\n// //     </div>\n// //   );\n// // }\n\n// // export default function ProjectList(){\n// //   const [projects,setProjects]=useState([]);\n// //   const nav = useNavigate();\n// //   useEffect(()=>{ fetchList(); },[]);\n// //   async function fetchList(){\n// //     const res = await fetch('http://localhost:5000/api/projects');\n// //     const data = await res.json();\n// //     if(res.ok) setProjects(data.projects);\n// //     else alert(data.msg||'Error');\n// //   }\n// //   async function download(id){\n// //     window.location = 'http://localhost:5000/api/projects/download/'+id;\n// //   }\n// //   function check(id){ nav('/plagiarism/'+id); }\n// //   return (\n// //     <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n// //       {projects.map(p=> <ProjectCard key={p._id} p={p} onDownload={download} onCheck={check} />)}\n// //     </div>\n// //   );\n// // }\n// import React, { useEffect, useState } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n\n// function ProjectCard({ p, onDownload, onCheck }) {\n//  return (\n//   <div className=\"border p-4 rounded bg-white\">\n//    <h3 className=\"font-semibold\">{p.title}</h3>\n//    <p className=\"text-sm\">{p.description}</p>\n//    <div className=\"text-xs text-gray-500\">By: {p.uploadedBy}</div>\n//    <div className=\"mt-2 space-x-2\">\n//     <button\n//      onClick={() => onDownload(p._id)}\n//      className=\"px-2 py-1 border rounded\">\n//      Download\n//     </button>\n//     <button onClick={() => onCheck(p._id)} className=\"px-2 py-1 border rounded\">\n//      Check Plagiarism\n//     </button>\n//    </div>\n//   </div>\n//  );\n// }\n\n// export default function ProjectList() {\n//  const [projects, setProjects] = useState([]);\n//  const nav = useNavigate();\n\n//  useEffect(() => {\n//   fetchList();\n//  }, []);\n\n//  async function fetchList() {\n//   try {\n//    const token = localStorage.getItem(\"token\"); // ⚡ get JWT from localStorage\n//    const res = await fetch(\"http://127.0.0.1:5000/api/projects\", {\n//     headers: {\n//      \"Content-Type\": \"application/json\",\n//      Authorization: `Bearer ${token}`, // ⚡ pass token in header\n//     },\n//    });\n//    const data = await res.json();\n//    if (res.ok) setProjects(data.projects);\n//    else alert(data.msg || \"Error fetching projects\");\n//   } catch (err) {\n//    console.error(err);\n//    alert(\"Failed to fetch projects. Check backend connection.\");\n//   }\n//  }\n\n//  async function download(id) {\n//   const token = localStorage.getItem(\"token\");\n//   // optional: add token if backend requires\n//   window.location = `http://localhost:5000/api/projects/download/${id}`;\n//  }\n\n//  function check(id) {\n//   nav(`/plagiarism/${id}`);\n//  }\n\n//  return (\n//   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//    {projects.map((p) => (\n//     <ProjectCard key={p._id} p={p} onDownload={download} onCheck={check} />\n//    ))}\n//   </div>\n//  );\n// }\n/** @format */\n/** @format */\n\n// import React, { useEffect, useState } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n\n// function ProjectCard({ p, onDownload, onCheck }) {\n//  return (\n//   <div className=\"border p-4 rounded bg-white\">\n//    <h3 className=\"font-semibold\">{p.title}</h3>\n//    <p className=\"text-sm\">{p.description}</p>\n\n//    <div className=\"text-xs text-gray-500\">By: {p.student}</div>\n\n//    <div className=\"mt-2 space-x-2\">\n//     <button\n//      onClick={() => onDownload(p._id)}\n//      className=\"px-2 py-1 border rounded\">\n//      Download ({p.download_count || 0})\n//     </button>\n\n//     <button onClick={() => onCheck(p._id)} className=\"px-2 py-1 border rounded\">\n//      Check Plagiarism\n//     </button>\n//    </div>\n//   </div>\n//  );\n// }\n\n// export default function ProjectList() {\n//  const [projects, setProjects] = useState([]);\n//  const nav = useNavigate();\n\n//  useEffect(() => {\n//   fetchList();\n//  }, []);\n\n//  async function fetchList() {\n//   try {\n//    const token = localStorage.getItem(\"token\");\n\n//    const res = await fetch(\"http://127.0.0.1:5000/api/projects/my\", {\n//     headers: {\n//      \"Content-Type\": \"application/json\",\n//      Authorization: `Bearer ${token}`,\n//     },\n//    });\n\n//    const data = await res.json();\n\n//    // ✅ Backend returns array directly, not {projects: []}\n//    if (Array.isArray(data)) {\n//     setProjects(data);\n//    } else {\n//     console.warn(\"Unexpected response:\", data);\n//     setProjects([]);\n//    }\n//   } catch (err) {\n//    console.error(err);\n//    alert(\"Failed to fetch your projects.\");\n//   }\n//  }\n\n//  async function download(id) {\n//   try {\n//    const token = localStorage.getItem(\"token\");\n\n//    const res = await fetch(\n//     `http://localhost:5000/api/projects/download/${id}`,\n//     {\n//      method: \"GET\",\n//      headers: {\n//       Authorization: `Bearer ${token}`,\n//      },\n//     }\n//    );\n\n//    if (!res.ok) {\n//     alert(\"Failed to download file\");\n//     return;\n//    }\n\n//    // ✅ convert response to file\n//    const blob = await res.blob();\n//    const url = window.URL.createObjectURL(blob);\n\n//    const a = document.createElement(\"a\");\n//    a.href = url;\n\n//    let filename =\n//     res.headers.get(\"Content-Disposition\")?.split(\"filename=\")[1] ||\n//     \"project_file\";\n\n//    filename = filename.replace(/\"/g, \"\").trim();\n\n//    a.download = filename;\n//    a.click();\n\n//    window.URL.revokeObjectURL(url);\n\n//    // ✅ Refresh list → updates download count\n//    fetchList();\n//   } catch (err) {\n//    console.error(\"Download error:\", err);\n//    alert(\"Error downloading file\");\n//   }\n//  }\n\n//  function check(id) {\n//   nav(`/plagiarism/${id}`);\n//  }\n\n//  return (\n//   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//    {projects.length === 0 ? (\n//     <p className=\"text-center text-gray-500 col-span-full\">\n//      You haven't uploaded any projects yet.\n//     </p>\n//    ) : (\n//     projects.map((p) => (\n//      <ProjectCard key={p._id} p={p} onDownload={download} onCheck={check} />\n//     ))\n//    )}\n//   </div>\n//  );\n// }\n\n//Revised Code After Recent Edits","map":{"version":3,"names":[],"sources":["C:/Users/piyus/Downloads/student-project-platform-flask/frontend/src/pages/ProjectList.jsx"],"sourcesContent":["/** @format */\n\n// /** @format */\n\n// // import React, {useEffect, useState} from 'react';\n// // import { useNavigate } from 'react-router-dom';\n\n// // function ProjectCard({p, onDownload, onCheck}){\n// //   return (\n// //     <div className=\"border p-4 rounded bg-white\">\n// //       <h3 className=\"font-semibold\">{p.title}</h3>\n// //       <p className=\"text-sm\">{p.description}</p>\n// //       <div className=\"text-xs text-gray-500\">By: {p.uploadedBy}</div>\n// //       <div className=\"mt-2 space-x-2\">\n// //         <button onClick={()=> onDownload(p._id)} className=\"px-2 py-1 border rounded\">Download</button>\n// //         <button onClick={()=> onCheck(p._id)} className=\"px-2 py-1 border rounded\">Check Plagiarism</button>\n// //       </div>\n// //     </div>\n// //   );\n// // }\n\n// // export default function ProjectList(){\n// //   const [projects,setProjects]=useState([]);\n// //   const nav = useNavigate();\n// //   useEffect(()=>{ fetchList(); },[]);\n// //   async function fetchList(){\n// //     const res = await fetch('http://localhost:5000/api/projects');\n// //     const data = await res.json();\n// //     if(res.ok) setProjects(data.projects);\n// //     else alert(data.msg||'Error');\n// //   }\n// //   async function download(id){\n// //     window.location = 'http://localhost:5000/api/projects/download/'+id;\n// //   }\n// //   function check(id){ nav('/plagiarism/'+id); }\n// //   return (\n// //     <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n// //       {projects.map(p=> <ProjectCard key={p._id} p={p} onDownload={download} onCheck={check} />)}\n// //     </div>\n// //   );\n// // }\n// import React, { useEffect, useState } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n\n// function ProjectCard({ p, onDownload, onCheck }) {\n//  return (\n//   <div className=\"border p-4 rounded bg-white\">\n//    <h3 className=\"font-semibold\">{p.title}</h3>\n//    <p className=\"text-sm\">{p.description}</p>\n//    <div className=\"text-xs text-gray-500\">By: {p.uploadedBy}</div>\n//    <div className=\"mt-2 space-x-2\">\n//     <button\n//      onClick={() => onDownload(p._id)}\n//      className=\"px-2 py-1 border rounded\">\n//      Download\n//     </button>\n//     <button onClick={() => onCheck(p._id)} className=\"px-2 py-1 border rounded\">\n//      Check Plagiarism\n//     </button>\n//    </div>\n//   </div>\n//  );\n// }\n\n// export default function ProjectList() {\n//  const [projects, setProjects] = useState([]);\n//  const nav = useNavigate();\n\n//  useEffect(() => {\n//   fetchList();\n//  }, []);\n\n//  async function fetchList() {\n//   try {\n//    const token = localStorage.getItem(\"token\"); // ⚡ get JWT from localStorage\n//    const res = await fetch(\"http://127.0.0.1:5000/api/projects\", {\n//     headers: {\n//      \"Content-Type\": \"application/json\",\n//      Authorization: `Bearer ${token}`, // ⚡ pass token in header\n//     },\n//    });\n//    const data = await res.json();\n//    if (res.ok) setProjects(data.projects);\n//    else alert(data.msg || \"Error fetching projects\");\n//   } catch (err) {\n//    console.error(err);\n//    alert(\"Failed to fetch projects. Check backend connection.\");\n//   }\n//  }\n\n//  async function download(id) {\n//   const token = localStorage.getItem(\"token\");\n//   // optional: add token if backend requires\n//   window.location = `http://localhost:5000/api/projects/download/${id}`;\n//  }\n\n//  function check(id) {\n//   nav(`/plagiarism/${id}`);\n//  }\n\n//  return (\n//   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//    {projects.map((p) => (\n//     <ProjectCard key={p._id} p={p} onDownload={download} onCheck={check} />\n//    ))}\n//   </div>\n//  );\n// }\n/** @format */\n/** @format */\n\n// import React, { useEffect, useState } from \"react\";\n// import { useNavigate } from \"react-router-dom\";\n\n// function ProjectCard({ p, onDownload, onCheck }) {\n//  return (\n//   <div className=\"border p-4 rounded bg-white\">\n//    <h3 className=\"font-semibold\">{p.title}</h3>\n//    <p className=\"text-sm\">{p.description}</p>\n\n//    <div className=\"text-xs text-gray-500\">By: {p.student}</div>\n\n//    <div className=\"mt-2 space-x-2\">\n//     <button\n//      onClick={() => onDownload(p._id)}\n//      className=\"px-2 py-1 border rounded\">\n//      Download ({p.download_count || 0})\n//     </button>\n\n//     <button onClick={() => onCheck(p._id)} className=\"px-2 py-1 border rounded\">\n//      Check Plagiarism\n//     </button>\n//    </div>\n//   </div>\n//  );\n// }\n\n// export default function ProjectList() {\n//  const [projects, setProjects] = useState([]);\n//  const nav = useNavigate();\n\n//  useEffect(() => {\n//   fetchList();\n//  }, []);\n\n//  async function fetchList() {\n//   try {\n//    const token = localStorage.getItem(\"token\");\n\n//    const res = await fetch(\"http://127.0.0.1:5000/api/projects/my\", {\n//     headers: {\n//      \"Content-Type\": \"application/json\",\n//      Authorization: `Bearer ${token}`,\n//     },\n//    });\n\n//    const data = await res.json();\n\n//    // ✅ Backend returns array directly, not {projects: []}\n//    if (Array.isArray(data)) {\n//     setProjects(data);\n//    } else {\n//     console.warn(\"Unexpected response:\", data);\n//     setProjects([]);\n//    }\n//   } catch (err) {\n//    console.error(err);\n//    alert(\"Failed to fetch your projects.\");\n//   }\n//  }\n\n//  async function download(id) {\n//   try {\n//    const token = localStorage.getItem(\"token\");\n\n//    const res = await fetch(\n//     `http://localhost:5000/api/projects/download/${id}`,\n//     {\n//      method: \"GET\",\n//      headers: {\n//       Authorization: `Bearer ${token}`,\n//      },\n//     }\n//    );\n\n//    if (!res.ok) {\n//     alert(\"Failed to download file\");\n//     return;\n//    }\n\n//    // ✅ convert response to file\n//    const blob = await res.blob();\n//    const url = window.URL.createObjectURL(blob);\n\n//    const a = document.createElement(\"a\");\n//    a.href = url;\n\n//    let filename =\n//     res.headers.get(\"Content-Disposition\")?.split(\"filename=\")[1] ||\n//     \"project_file\";\n\n//    filename = filename.replace(/\"/g, \"\").trim();\n\n//    a.download = filename;\n//    a.click();\n\n//    window.URL.revokeObjectURL(url);\n\n//    // ✅ Refresh list → updates download count\n//    fetchList();\n//   } catch (err) {\n//    console.error(\"Download error:\", err);\n//    alert(\"Error downloading file\");\n//   }\n//  }\n\n//  function check(id) {\n//   nav(`/plagiarism/${id}`);\n//  }\n\n//  return (\n//   <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//    {projects.length === 0 ? (\n//     <p className=\"text-center text-gray-500 col-span-full\">\n//      You haven't uploaded any projects yet.\n//     </p>\n//    ) : (\n//     projects.map((p) => (\n//      <ProjectCard key={p._id} p={p} onDownload={download} onCheck={check} />\n//     ))\n//    )}\n//   </div>\n//  );\n// }\n\n//Revised Code After Recent Edits\n"],"mappings":"AAAA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}